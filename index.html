<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
   
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Playground</title>

    <style>
      button{
        height: 36px;
        padding: 20px;
        display: inline-flex;
        align-items: center; 
      }

      .danger-btn{
        border-radius: 20px; 
        background-color: chocolate; 
        border-color: chocolate; 
        color:aliceblue

      }
    </style>
  </head>
  <body>
   
  
    <script>      

      window.addEventListener("flutterInAppWebViewPlatformReady", flutterInAppWebViewPlatformReadyHandler);

      function addLog(text){
        var logContainer = document.getElementById('log-container');
        logContainer.innerHTML += '<br/>' + text;
      }

      function flutterInAppWebViewPlatformReadyHandler(event){
        addLog('flutterInAppWebViewPlatformReady fired');
      }

      // testing the dispatch
      function dispatchFlutterInAppWebViewPlatformReadyEvent(){
        window.dispatchEvent(new Event('flutterInAppWebViewPlatformReady',  {"bubbles":true, "cancelable":false}))
      }

      // with flutter in app
      function withFlutterInAppWebView(){
        if(!window.flutter_inappwebview){
          addLog('flutter_inappwebview not found', window.flutter_inappwebview)
        }

        if(window.flutter_inappwebview && !window.flutter_inappwebview.callHandler){
          addLog('flutter_inappwebview.callHandler not found', window.flutter_inappwebview)
        }
        
        addLog('BAFORE flutter_inappwebview.callHandler');
        try{
        window.flutter_inappwebview.callHandler('clipboardHandler', 'pix-text-message-call-handler').then(function(result) {
              addLog('call-handler-finished');
          });
        }catch(e){
          
          addLog(e)
          
        }

        addLog('AFTER flutter_inappwebview.callHandler');
      }

      // with postMessage
      function withBasicPostMessage(){
        window.parent.postMessage('pix-text-message-on-post-message', "*");
        addLog('postMessageSent')
      }
      
    </script>
    
    <h1>Playground</h1>
    <button onclick="withFlutterInAppWebView()">Call Handler</button>
    <button onclick="withBasicPostMessage()">Post Message</button>    
    <br/>
    <br/>
    <br/>
    <button onclick="dispatchFlutterInAppWebViewPlatformReadyEvent()"
            class="danger-btn">Test Event</button>
    
    <div id="log-container" style="margin-top: 40px; width: 100%"></div>
    

    
  </body>
</html>
